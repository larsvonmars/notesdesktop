@tailwind base;
@tailwind components;
@tailwind utilities;

/* RichTextEditor Styles */
@layer utilities {
  /* Placeholder styling */
  [data-placeholder]:empty:before {
    content: attr(data-placeholder);
    @apply text-gray-400 pointer-events-none block;
  }

  /* ContentEditable focus styling */
  [contenteditable='true']:focus {
    @apply outline-none;
  }

  /* Checkbox styling in contenteditable */
  [contenteditable='true'] input[type='checkbox'] {
    @apply mr-2 cursor-pointer;
  }

  /* List styling */
  [contenteditable='true'] ul,
  [contenteditable='true'] ol {
    margin: 1em 0 !important;
    padding-left: 2em !important;
    display: block !important;
  }

  [contenteditable='true'] ul {
    list-style-type: disc !important;
  }

  [contenteditable='true'] ol {
    list-style-type: decimal !important;
  }

  /* Checklist styling */
  [contenteditable='true'] .checklist-list,
  [contenteditable='true'] [data-checklist='true'] {
    list-style: none !important;
    padding-left: 1.75em !important;
    margin-left: 0 !important;
  }

  /* List item styling */
  [contenteditable='true'] li {
    margin: 0.5em 0 !important;
    display: list-item !important;
  }

  [contenteditable='true'] ul li {
    list-style-type: disc !important;
  }

  [contenteditable='true'] ol li {
    list-style-type: decimal !important;
  }

  [contenteditable='true'] li.checklist-item {
    list-style: none !important;
    display: flex !important;
    align-items: flex-start !important;
  }

  [contenteditable='true'] li.checklist-item .checklist-checkbox {
    @apply mt-0.5 shrink-0;
  }

  /* Heading styles */
  [contenteditable='true'] h1 {
    font-size: 2.5rem !important;
    @apply font-extrabold text-gray-900;
    margin-top: 0.67em !important;
    margin-bottom: 0.67em !important;
    line-height: 1.2 !important;
    scroll-margin-top: 2rem !important;
    display: block !important;
  }

  [contenteditable='true'] h2 {
    font-size: 2rem !important;
    @apply font-bold text-gray-800;
    margin-top: 0.83em !important;
    margin-bottom: 0.83em !important;
    line-height: 1.3 !important;
    scroll-margin-top: 2rem !important;
    display: block !important;
  }

  [contenteditable='true'] h3 {
    font-size: 1.5rem !important;
    @apply font-bold text-gray-700;
    margin-top: 1em !important;
    margin-bottom: 1em !important;
    line-height: 1.4 !important;
    scroll-margin-top: 2rem !important;
    display: block !important;
  }

  /* Blockquote styling */
  [contenteditable='true'] blockquote {
    @apply border-l-4 border-gray-200 pl-4 ml-0 text-gray-500 italic;
    display: block !important;
  }

  /* Inline code styling */
  [contenteditable='true'] code {
    @apply bg-gray-100 rounded font-mono text-sm;
    padding: 0.125rem 0.25rem !important;
  }

  /* Link styling - Enhanced */
  [contenteditable='true'] a {
    @apply text-blue-600 cursor-pointer relative;
    text-decoration: underline;
    text-decoration-color: rgba(37, 99, 235, 0.4);
    text-decoration-thickness: 2px;
    text-underline-offset: 2px;
    transition: all 0.2s ease;
  }

  [contenteditable='true'] a:hover {
    @apply text-blue-800;
    text-decoration-color: rgba(30, 64, 175, 0.6);
    text-decoration-thickness: 2px;
  }

  [contenteditable='true'] a:active {
    @apply text-blue-900;
  }

  /* Link icon indicator (optional visual enhancement) */
  [contenteditable='true'] a::after {
    content: 'â†—';
    display: inline-block;
    font-size: 0.75em;
    margin-left: 0.2em;
    opacity: 0;
    transform: translate(-2px, 2px);
    transition: all 0.2s ease;
  }

  [contenteditable='true'] a:hover::after {
    opacity: 0.5;
    transform: translate(0, -2px);
  }

  /* Horizontal rule styling */
  [contenteditable='true'] hr {
    border: none !important;
    @apply border-t-2 border-gray-200 my-6;
  }

  /* Mark/highlight styling */
  [contenteditable='true'] mark {
    @apply bg-yellow-200;
    padding: 0.125rem 0 !important;
  }

  /* Block outline styles - shown when block visibility is enabled */
  .show-block-outlines [contenteditable='true'] > *,
  .show-block-outlines [contenteditable='true'] p,
  .show-block-outlines [contenteditable='true'] h1,
  .show-block-outlines [contenteditable='true'] h2,
  .show-block-outlines [contenteditable='true'] h3,
  .show-block-outlines [contenteditable='true'] ul,
  .show-block-outlines [contenteditable='true'] ol,
  .show-block-outlines [contenteditable='true'] blockquote,
  .show-block-outlines [contenteditable='true'] pre,
  .show-block-outlines [contenteditable='true'] [data-block='true'] {
    position: relative;
    border: 1px dashed rgba(147, 51, 234, 0.3) !important;
    border-radius: 4px !important;
    padding: 8px !important;
    margin-top: 4px !important;
    margin-bottom: 4px !important;
    transition: all 0.2s ease;
  }

  .show-block-outlines [contenteditable='true'] > *:hover,
  .show-block-outlines [contenteditable='true'] p:hover,
  .show-block-outlines [contenteditable='true'] h1:hover,
  .show-block-outlines [contenteditable='true'] h2:hover,
  .show-block-outlines [contenteditable='true'] h3:hover,
  .show-block-outlines [contenteditable='true'] ul:hover,
  .show-block-outlines [contenteditable='true'] ol:hover,
  .show-block-outlines [contenteditable='true'] blockquote:hover,
  .show-block-outlines [contenteditable='true'] pre:hover,
  .show-block-outlines [contenteditable='true'] [data-block='true']:hover {
    background-color: rgba(147, 51, 234, 0.05) !important;
    border-color: rgba(147, 51, 234, 0.6) !important;
  }

  /* Block type labels - shown when block visibility is enabled */
  .show-block-outlines [contenteditable='true'] > *::before,
  .show-block-outlines [contenteditable='true'] p::before,
  .show-block-outlines [contenteditable='true'] h1::before,
  .show-block-outlines [contenteditable='true'] h2::before,
  .show-block-outlines [contenteditable='true'] h3::before,
  .show-block-outlines [contenteditable='true'] ul::before,
  .show-block-outlines [contenteditable='true'] ol::before,
  .show-block-outlines [contenteditable='true'] blockquote::before,
  .show-block-outlines [contenteditable='true'] pre::before,
  .show-block-outlines [contenteditable='true'] [data-block='true']::before {
    content: attr(data-block-label);
    position: absolute;
    top: -10px;
    left: 4px;
    font-size: 9px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    background: linear-gradient(135deg, #9333EA 0%, #7C3AED 100%);
    color: white;
    padding: 2px 6px;
    border-radius: 3px;
    z-index: 10;
    pointer-events: none;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  }

  /* Specific block type labels */
  .show-block-outlines [contenteditable='true'] p::before {
    content: 'P';
  }

  .show-block-outlines [contenteditable='true'] h1::before {
    content: 'H1';
    background: linear-gradient(135deg, #EF4444 0%, #DC2626 100%);
  }

  .show-block-outlines [contenteditable='true'] h2::before {
    content: 'H2';
    background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%);
  }

  .show-block-outlines [contenteditable='true'] h3::before {
    content: 'H3';
    background: linear-gradient(135deg, #10B981 0%, #059669 100%);
  }

  .show-block-outlines [contenteditable='true'] ul::before {
    content: 'UL';
    background: linear-gradient(135deg, #3B82F6 0%, #2563EB 100%);
  }

  .show-block-outlines [contenteditable='true'] ol::before {
    content: 'OL';
    background: linear-gradient(135deg, #06B6D4 0%, #0891B2 100%);
  }

  .show-block-outlines [contenteditable='true'] blockquote::before {
    content: 'Quote';
    background: linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%);
  }

  .show-block-outlines [contenteditable='true'] pre::before {
    content: 'Code';
    background: linear-gradient(135deg, #64748B 0%, #475569 100%);
  }

  .show-block-outlines [contenteditable='true'] [data-block='true']::before {
    content: attr(data-block-type);
    background: linear-gradient(135deg, #EC4899 0%, #DB2777 100%);
  }

  /* Adjust spacing for nested elements within blocks */
  .show-block-outlines [contenteditable='true'] ul > li,
  .show-block-outlines [contenteditable='true'] ol > li {
    border: none !important;
    padding: 0 !important;
    margin-left: 0 !important;
  }

  .show-block-outlines [contenteditable='true'] ul > li::before,
  .show-block-outlines [contenteditable='true'] ol > li::before {
    display: none !important;
  }

  /* Image block custom UI styles */
  .image-block-container {
    position: relative;
    display: inline-block;
    max-width: 100%;
    user-select: none;
  }

  .image-block-wrapper {
    position: relative;
    display: inline-block;
  }

  .image-block-img {
    display: block;
    max-width: 100%;
    height: auto;
    pointer-events: none;
  }

  .image-block-container.resizing .image-block-img {
    pointer-events: none;
    user-select: none;
  }

  .image-delete-btn {
    cursor: pointer;
    user-select: none;
  }

  .image-resize-handle {
    position: absolute;
    user-select: none;
    z-index: 10;
  }

  .image-block-container.resizing {
    cursor: inherit;
  }

  /* Ensure resize handles are above the image */
  .image-block-wrapper > * {
    position: relative;
  }

  /* Smooth transition for opacity changes */
  .image-delete-btn,
  .image-resize-handle {
    transition: opacity 0.2s ease-in-out;
  }

  /* Show UI elements when hovering over the container or when resizing */
  .image-block-container:hover .image-delete-btn,
  .image-block-container:hover .image-resize-handle,
  .image-block-container.resizing .image-delete-btn,
  .image-block-container.resizing .image-resize-handle {
    opacity: 1 !important;
  }
}
